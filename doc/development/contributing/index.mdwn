[[!toc]]

# Perl basics

## Standard modules

- [[Modern::Perl|https://p3rl.org/Modern::Perl]]
- [[Moo|https://p3rl.org/Moo]]
- [[Type::Tiny|https://p3rl.org/Type::Tiny]]

## Testing

Testing in Perl uses a format called the [[Test Anything Protocol|http://testanything.org/]] (or TAP).
This is a simple text-based format that outputs test results in a standard way
such that the results can be generated by different tools and even stored for later processing.

In order actually run these tests, you need to use the
[[prove|https://p3rl.org/prove]] test harness command.
Usually you want to run the test files under the `t/` directory.
By default, test files are just Perl scripts that have the extension `.t`.

You can do that by running `prove -lvr t/`.

  - The `t/` part tells `prove` where it to look for test files.
  - The `-l` option adds the Perl modules under the **`lib/`** directory to the Perl search path (`@INC`).
  - The `-v` option runs the tests in **verbose** mode to give extra information about each test.
  - The `-r` option **recursively** loads test files for every directory given.


In order to actually write the tests, look over the documentation for
[[Test::Most|https://p3rl.org/Test::Most]] and [[Test::More|https://p3rl.org/Test::More]].
These contain functions for checking for expected conditions in the test code.

[[!template id=youtube v="KAE3qrxBdXs"]]

### Release managment

In order to make releases, we use [[Dist::Zilla|https://p3rl.org/Dist::Zilla]].
This is a tool that can extended to do many maintenance tasks such as
listing all the dependencies of the code or testing for spelling errors in
documentation.

### Documentation

Perl documentation is written in a format called [[POD|https://p3rl.org/perlpod]].
It has a simple syntax that can be converted to many other formats such as HTML or manpages.
That syntax can be extended by using [[Pod::Weaver|https://p3rl.org/Pod::Weaver]]
which acts as a preprocessor that can add additional directives to POD.

### Devops

We use virtual machines to test the code under different environments. These
virtual machines are configured by using [[Vagrant|https://www.vagrantup.com/]].
See the [[devops|https://github.com/project-renard/devops]] repository for more
information.

# GTK

GTK+ is the cross-platform GUI toolkit that we use. Instead of writing the GUI
code entirely by hand, much of layout is done interactively using the
[[Glade|https://glade.gnome.org/]] designer.

GTK+ is a C library. Despite being written in C, it is written in an
object-oriented style by using the `glib` C library.
This has the advantage that bindings to a `glib`-based library can be easily
created for languages like Perl, by using something called the
[[GObject Introspection|https://wiki.gnome.org/action/show/Projects/GObjectIntrospection]] layer.
This is how the Perl bindings to GTK+ are also provided by providing access to that layer using the
[[Glib::Object::Introspection|https://p3rl.org/Glib::Object::Introspection]] package as part of the
[[GTK-Perl|http://gtk2-perl.sourceforge.net/doc/]] project.

## Learning GTK+

If you want to learn how to use Glade, see the [[Charter example|https://github.com/zmughal/learning-gtk/tree/master/charter]]
at this repository <https://github.com/zmughal/learning-gtk>. The code is based
off a tutorial written using C, but if you compare the Perl code to the C code,
you can see that it is not that much different. This is because most of the GUI
defintion is in the Glade XML file which can be shared by both the C version
and the Perl version.

Gnome also hosts several tutorials on how to write GTK+ complete applications
*without* using Glade, most of which are written in C:
<https://developer.gnome.org/gnome-devel-demos/stable/>.
One of those tutorials has been translated into Perl and is available here:
<https://github.com/MaxPerl/perl-Gtk3-Tutorial>.

If you are trying to figure out how to use a specific widget and having trouble
with the Perl syntax, you may want to look at the following examples that showcase individual widgets:
  - <https://github.com/kevinphilp/Perl-gtk3-Tutorial>
  - <https://github.com/dave-theunsub/gtk3-perl-demos>
  - <https://github.com/Programmica/perl-gtk3-examples>

## GTK+ documentation

In order to see the documentation for Glib-based libraries (such as Gtk) in a Perl-friendly way,
the [[Glib::Object::Introspection|https://p3rl.org/Glib::Object::Introspection]]
package comes with called `perli11ndoc` that shows all the available classes that can be used
for that library using Perl syntax.

[[!img gfx/perli11ndoc.png caption="The perli11ndoc tool showing documentation from Gtk3's AccelGroup class."]]

# Creating Perl bindings

- <https://github.com/Perl-XS/notes/blob/master/Resources.md>

# Developing on Windows

- TODO Under construction

## For now :

- read over <https://project-renard.github.io/doc/development/meeting-log/posts/2016/05/03/windows-build-with-msys2/>
- try out <https://github.com/MaxPerl/perl-Gtk3-windows-installer>.
